\pgfplotsset{width=15cm,compat=1.9}

% We will externalize the figures
% \tikzexternalize
\pgfplotsset{
  log ticks with fixed point,
}
\begin{tikzpicture}
    \begin{semilogxaxis}[
        title={Transformer benchmark fp32 WASM versus WebGPU},
        xlabel={Batch size},
        ylabel={Execution time in ms},
        xmin=1, xmax=64,
        ymin=0, ymax=70000,
        xtick={1,2,4,8,16,32, 64},
        ytick={1,10000,20000,30000,400000,50000,60000, 70000},
        legend pos=north west,
        ymajorgrids=true,
        grid style=dashed,
        scatter/classes={
            a={mark=square*,red},
            b={mark=triangle*,orange},
            c={mark=o,draw=blue},
            d={mark=square,green}
        },
        yticklabel style={
            /pgf/number format/fixed,
        },
        scaled y ticks=false
    ]
    
    \addplot[
        color=red,
        ]
        coordinates {
            (1,956.30)(2,1995.50)(4,3920.60)(8,7716.80)(16,15541.70)(32,30951.80)(64,62227.60)
            % (1,944.60)(2,1903.30)(4,3804.20)(8,7652.10)(16,15821.50)(32,31018.90)(64,61617.10)(1,942.80)(2,1910.30)(4,3785.50)(8,7688.90)(16,15451.70)(32,30487.10)(64,61439.90)(1,947.00)(2,1909.80)(4,3789.60)(8,7630.80)(16,15398.60)(32,31061.70)(64,61740.10)(1,940.00)(2,1896.70)(4,3784.60)(8,7576.40)(16,15259.60)(32,30987.50)(64,61915.30)
        };
        \addlegendentry[mark=square*]{WASM (fp32) Intel Xeon E5-2680 V2}
        
    \addplot[
        color=orange,
        ]
        coordinates {
            (1,738.30)(2,1542.90)(4,3031.10)(8,6120.60)(16,11841.00)(32,23640.60)(64,47463.70)
            % (1,725.50)(2,1458.40)(4,2900.60)(8,5744.00)(16,11602.30)(32,23204.90)(64,48728.00)(1,731.90)(2,1504.40)(4,2972.40)(8,6061.70)(16,12064.70)(32,24551.80)(64,47165.50)(1,729.00)(2,1407.20)(4,3047.20)(8,6001.40)(16,12046.50)(32,24289.10)(64,47491.50)(1,810.80)(2,1587.00)(4,3120.60)(8,5854.20)(16,11484.00)(32,24921.40)(64,47997.00)
        };
        \addlegendentryexpanded[mark=triangle*]{WASM (fp32) Intel Core i9-9980HK}
    \addplot[
        color=blue,
        ]
        coordinates {
            (1,196.00)(2,379.30)(4,726.80)(8,1445.80)(16,2856.30)(32,5748.80)(64,11404.40)
            % (1,193.90)(2,357.80)(4,696.90)(8,1375.70)(16,2725.20)(32,5447.20)(64,10807.90)(1,190.60)(2,361.50)(4,696.10)(8,1386.80)(16,2729.40)(32,5446.00)(64,10878.80)(1,191.40)(2,369.00)(4,695.10)(8,1381.00)(16,2731.00)(32,5440.00)(64,10916.30)(1,196.40)(2,361.90)(4,701.30)(8,1376.30)(16,2721.40)(32,5471.70)(64,10822.80)
            };
        \addlegendentry[mark=o]{WebGPU (fp32) Intel UHD Graphics 630}

    \addplot[
        color=green,
        ]
        coordinates {
            (1,29.10)(2,92.30)(4,69.50)(8,196.30)(16,282.00)(32,664.50)(64,794.70)
            % (1,27.70)(2,57.20)(4,60.00)(8,123.10)(16,187.30)(32,565.60)(64,776.70)(1,27.30)(2,57.90)(4,113.90)(8,132.00)(16,415.70)(32,236.10)(64,762.10)(1,31.70)(2,58.40)(4,108.80)(8,65.50)(16,122.10)(32,477.40)(64,718.50)(1,24.30)(2,25.60)(4,36.50)(8,65.10)(16,122.90)(32,372.20)(64,643.80)
        };
        \addlegendentry[mark=square]{WebGPU (fp32) Nvidia Geforce GTX 1080 Ti}
    \addplot [
        scatter,only marks,
        scatter src=explicit symbolic,
    ] table [x=x,y=y,meta=label] {plotdata/HuggingFaceWasmVSWebGPU.dat};

    \end{semilogxaxis}
\end{tikzpicture}